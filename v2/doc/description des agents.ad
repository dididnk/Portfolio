= Description des Agents (windexserver.servlet.agent.*)


== Liste des agents

* *AddressBook* : [doublon avec User ? ] agent de gestion du carnet d'adresse
* *Backup* : agent de gestion de la configuration des sauvegardes
* *BackupOld* : déprécié 
* *ChangeAdminPwd* : agent de gestion du login et mot de passe de  l'administrateur
* *ChangePassword* : agent pour changer le mot de passe utilisateur [à déprécier, voir l'agent User]
* *Chrono* : [à finir] agent de configuration des numéros de chronos
* *Config* : déprécié, ancien gestionnaire de la configuration. Voir Configuration, Console
* *Configuration* : agent de gestion (administrateur) de la configuration de l'indexation, et du dépôt de la GED
* *Console* : agent console (administrateur) permettant autre autre de lister/supprimer les sessions, les URL en erreurs, régénérer/supprimer, indexer les indexes, et d'obtenir les informations server en temps réel de Windex
* *Dashboard* : [à finir] agent de configuration des tableaux de bords utilisateurs
* *DocProperties* : agent (administrateur) pour importer en masse des propriétés aux documents [Bug : gérer sa gestion du dossier temporaire]
* *ErrorMessages* : Classe utilisée pour les erreurs ????????????????
* *EventLog* : agent d'export des logs de la GED [Vérifier les droits : admin & webmaster]
* *Explorer* : agent représentant l'explorateur des documents (Windex GED vue du côté utilisateur)
* *Graph* : déprécié voir l'agent Workflow. Agent de gestion du workflow
* *Indexer* : [à déprécier, voir configuration et console] Agent qui lance l'indexation et sauve les fichiers de configuration
* *License* : agent de gestion de la licence [à convertir en JSON pour Aurélia, voir si pas implémenter autre part]
* *Link* : agent permettant de créer un lien temporaire vers un document [lui ajouter du JSON dans sa réponse ???????????]
* *ListItems* : déprécié voir Configuration
* *LoginDB* : agent de gestion de la connexion d'un utilisateur au travers d'une base de données par délégation
* *Mail* : agent de configuration de serveur de mail (SMTP) 
* *MailOld* : déprécié voir Mail
* *MetaTags* : déprécié voir Configuration
* *MimeTypes* : déprécié voir déprécié voir Configuration
* *Nestor* : agent permettant d'importer des droits utilisateurs. Utilisé par Coswin
* *Nexus* : agent permettant l'import/export du workflow [à implémenter dans l'agent Workflow], à lancer le GC Java [à placer autre part, et n'est pas utilisé a priori], et à relancer les logs interne [à voir l'utilité]
* *Page* : agent permettant de générer des pages HTML dynamiquement [À garder, car utile en debug]
* *PageFormaterAgent* : agent utiliser que par la SNCF (et fin de contrat) pour les agents AF-Formation et AF-GED. [à déprécier ?????]
* *PDF* : Donne des infos sur le doc PDF et calcule aussi les images de chaque page
* *Properties* : agent de gestion (administrateur) des propriétés globales (table WSProperties ) : peux activer la signature, affichage des colonnes de l'explorateur
* *PropertiesOld* : déprécié voir déprécié voir Properties
* *Registration* : Agent permettant de re-générer le mot de passe d'un utilisateur (envoie par mail en auto) et gestion de la page HTML de l'interface. [lui ajouter du JSON comme réponse]
* *Resource* : retourne des ressources interne protégé tel que le logo Windex, les JS, et CSS de thème
* *Resume* : déprécié voir déprécié voir Configuration
* *Scheduler* : déprécié voir déprécié voir Configuration
* *Search* : agent (utilisateur) de recherche plein texte de document
* *SearchAdmin* : agent (administrateur) de recherche plein texte de document 
* *SearchConfig* : déprécié voir déprécié voir Configuration
* *SearchGED* : L'agent de recherche plein texte de document [à déprécier, voir Search, SearchAdmin]
* *ShowContext* : agent retournant les mots suivant des mots trouvés. [A convertie en JSON]
* *ShowDoc* :  agent permettant de mettre en évidence des mots dans un document HTML  [à utiliser dans nouvelle interface]
* *Special007* : agent permettant de lancer une indexation, relire les fichiers traduction sans à avoir les droits nécessaire [est peut-être utilisé par Coswin ??? Ou pour lancer indexation après ajout de doc sur serveur]
* *Stats* : déprécié voir déprécié voir Configuration.[Attention service utilisé par l'application WindexGED-Indexation.go]
* *Tools* : [à clarifier et voir si utilisé par application externe]
* *Todo* : agent permettant à un utilisateur d'avoir sa propre  liste de "todo"  
* *Upload* : Agent de téléchargement de fichier client vers la GED
* *User* : [doublon avec Addrebook??] agent de web service charge de donner, modifier les infos de l'utilisateur actuel les données sont renvoyées au format JSON. Cet agent doit remplacer a terme : ChangePassword et autre agent de config de l'utilisateur lui-même
* *UserProperties* : Agent de gestion des propriétés utilisateurs (Table WSUserProperties). [À finir : droit à vérifier, usage ????, interface ??? + le format de sortie]
* *Version* : Agent public, retournant la version du produit et si le service est ok (toujours, sauf une erreur arrive) [INFO: à vérifier ou il est appelé]
* *Windex* : Agent [à déprécier] (administrateur) permettant de retourner des de la console d'administration :  Console/About/Hello/SearAdmin [à déprécier],
* *WordsToExclude* : déprécié voir déprécié voir Configuration
* *Workflow* : Agent de gestion du workflow (état et transition) [BUG : ne vérifie pas les droits utilisateurs]
* *__WSContext__* : super objet représentant le contexte accessible par tous les agents. Il permet donc d'accéder à des objets communs


== Agent User


=== Gestion des photos

* Ordre : *AddPhoto* +
Ajoute une photo pour l'utilisateur actuel ou de celui d'identifiant se trouvant dans le paramêtre "idUser" +
*Attention* : s'utilise au travers de l'agent de upload : "Upload" en lui parametrant dans "Order" la valeur "User:AddPhoto" et dans les autre champ les valeur attendu par AddPhoto (dont idUser) +
Exemple :
	** http://localhost:8087/WindexServer/WindexServer?Agent=User&Order=User:AddPhoto ...

* Ordre : *GetPhoto* +
Retourne la photo de l'utilisateur actuel ou de celui d'identifiant se trouvant dans le paramêtre "idUser" +
Exemple  :
	** http://localhost:8087/WindexServer/WindexServer?Agent=User&Order=GetPhoto 
	** http://localhost:8087/WindexServer/WindexServer?Agent=User&Order=GetPhoto&idUser=1
	
* Ordre : *DelPhoto* +
Supprime la photo de l'utilisateur actuel ou de celui d'identifiant se trouvant dans le paramêtre "idUser" +
Exemple :
	** http://localhost:8087/WindexServer/WindexServer?Agent=User&Order=DelPhoto
	** http://localhost:8087/WindexServer/WindexServer?Agent=User&Order=DelPhoto&idUser=1

 
 
=== Gestion des signatures


* Ordre : *ListSignature* +
Retourne la liste des signature de l'utilisateur actuel ou de celui d'identifiant se trouvant dans le paramêtre "idUser" +
Exemple :
	** http://localhost:8087/WindexServer/WindexServer?Agent=User&Order=ListSignature
	** http://localhost:8087/WindexServer/WindexServer?Agent=User&Order=ListSignature&idUser=1

* Ordre : *AddSignature* +
Ajoute une photo pour l'utilisateur actuel ou de celui d'identifiant se trouvant dans le paramêtre "idUser" +
Attenjtion s'utilise au travers de l'agent de upload : "Upload" en lui parametrant dans "Order" la valeur "User:AddPhoto" et dans les autre champ les valeur attendu par AddPhoto (dont idUser) +
Exemple  : 
	** http://localhost:8087/WindexServer/WindexServer?Agent=User&Order=User:AddSignature ...

* Ordre : *GetSignature* +
Retourne la signature de l'utilisateur actuel ou de celui d'identifiant se trouvant dans le paramêtre "idUser" +
Exemple  :
	** http://localhost:8087/WindexServer/WindexServer?Agent=User&Order=GetPhoto&signature=image2.jpg 
	** http://localhost:8087/WindexServer/WindexServer?Agent=User&Order=GetPhoto&idUser=1&signature=image2.jpg

* Ordre : *SetSignatureName* +
Change le nom du fichier de la signature (doit comporté l'extention) pour l'utilisateur actuel ou de celui d'identifiant se trouvant dans le paramêtre "idUser" +
Exemple  :
	** http://localhost:8087/WindexServer/WindexServer?Agent=User&Order=GetPhoto&signature=image2.jpg&newName=nouveau-nom.jpg
	** http://localhost:8087/WindexServer/WindexServer?Agent=User&Order=GetPhoto&idUser=1&signature=image2.jpg&newName=nouveau-nom.jpg

	
* Ordre : *DelSignature* +
Supprime la photo de l'utilisateur actuel ou de celui d'identifiant se trouvant dans le paramêtre "idUser" +
*Attention* : il fautre être administrateur, gestionnaire, ou l'utlisateur de la photo +
Exemple  :
	** http://localhost:8087/WindexServer/WindexServer?Agent=User&Order=DelPhoto&signature=image2.jpg
	** http://localhost:8087/WindexServer/WindexServer?Agent=User&Order=DelPhoto&idUser=1&signature=image2.jpg

 